@prefix map: <#>.
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> . 
@prefix skos: <http://www.w3.org/2004/02/skos/core#> . 
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix w3ns: <http://www.w3.org/ns/prov#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> . 
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix eli: <http://data.europa.eu/eli/ontology#> .
@prefix codex: <https://data.vlaanderen.be/ns/wetgeving#> .

map:RechtsgrondDocument
	rr:logicalTable [ rr:sqlQuery """
		SELECT	id AS Numac
		FROM WetgevingDocument
	""" 
	];
	rr:subjectMap [
		rr:template 'http://www.ejustice.just.fgov.be/eli/DT/JJJJ/MM/DD/{"Numac"}'; 
		rr:class eli:LegalResource; 
	].


map:VerschijningsvormDocument
	rr:logicalTable [rr:sqlQuery """
		SELECT	Document.id AS VlacoID,
				ISNULL(Document.Commentaar, '') AS beschrijving,
				CONVERT(date, Document.BSDatum) AS publicatiedatum,
				Document.Numac AS ID,
				ISNULL(Document.Opschrift, '') AS citeeropschrift
		FROM WetgevingDocument AS Document
	"""];
	rr:subjectMap [
		rr:template 'https://codex.vlaanderen.be/doc/document/{"VlacoID"}';
		rr:class eli:LegalExpression; 
	];
	rr:predicateObjectMap [ 
		rr:predicate dcterms:description; 
		rr:objectMap [rr:column '"beschrijving"'];
	];
	rr:predicateObjectMap [ 
		rr:predicate eli:date_publication; 
		rr:objectMap [rr:column '"publicatiedatum"'];
	];
	rr:predicateObjectMap [ 
		rr:predicate eli:id_local; 
		rr:objectMap [
			rr:column '"ID"';
			rr:termType rr:Literal; 
		];
	];
	rr:predicateObjectMap [ 
		rr:predicate eli:title; 
		rr:objectMap [rr:column '"citeeropschrift"'];
	];
	rr:predicateObjectMap [
		rr:predicate codex:realiseert; 
		rr:objectMap [
			rr:parentTriplesMap map:RechtsgrondDocument; 
			rr:joinCondition [
				rr:child 'VlacoID';
				rr:parent 'id';
			]
		]
	].